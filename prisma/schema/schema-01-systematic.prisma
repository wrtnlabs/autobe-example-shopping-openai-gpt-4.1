/// Represents a top-level sales channel (web, app, affiliate) with
/// independent branding, configuration, and legal context. Forms the root of
/// all section/category taxonomies. Other domains reference this for scoping
/// users, products, promotions, and analytics. Supports cross-channel
/// commerce and coordinated operations.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_channels {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Business channel code, unique across all channels, used for business
  /// logic referencing and integration.
  code String
  
  /// Public display name for the channel.
  name String
  
  /// Detailed channel description, including business usage, for
  /// admin/reference.
  description String?
  
  /// Country or region for compliance and default settings. ISO 3166-1
  /// (alpha-2).
  country String
  
  /// Default currency for transactions in this channel (ISO 4217 codes e.g.
  /// KRW, USD, EUR).
  currency String
  
  /// Default language for this channel (IETF language tag).
  language String
  
  /// Default timezone of the channel (IANA/Olson database format).
  timezone String
  
  /// Timestamp of channel creation.
  created_at DateTime @db.Timestamptz
  
  /// Timestamp of last channel update.
  updated_at DateTime @db.Timestamptz
  
  /// Timestamp of soft deletion, if applicable.
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  shopping_mall_ai_backend_channel_sections shopping_mall_ai_backend_channel_sections[]
  shopping_mall_ai_backend_channel_categories shopping_mall_ai_backend_channel_categories[]
  shopping_mall_ai_backend_orders shopping_mall_ai_backend_orders[]
  shopping_mall_ai_backend_coupons shopping_mall_ai_backend_coupons[]
  shopping_mall_ai_backend_articles shopping_mall_ai_backend_articles[]
  
  @@unique([code])
  @@index([country])
  @@index([name(ops: raw("gin_trgm_ops"))], type: Gin)
}

/// Defines a section structure (e.g., home, sale, featured) for a channel.
/// Each section is scoped by channel and optionally organized hierarchically
/// (nested sections). Supports business navigation, personalization, and
/// analytics segmentation.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_channel_sections {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Parent channel's {@link shopping_mall_ai_backend_channels.id}. Section
  /// belongs to a single channel.
  shopping_mall_ai_backend_channel_id String @db.Uuid
  
  /// Optional parent section for nested section hierarchy. Self-referencing to
  /// allow tree structure.
  parent_id String? @db.Uuid
  
  /// Section code, unique within channel.
  code String
  
  /// Display name for section/navigation.
  name String
  
  /// Section business purpose/admin memo.
  description String?
  
  /// Order for visual sorting/navigation; lower numbers are shown first.
  order Int @db.Integer
  
  /// Timestamp of section creation.
  created_at DateTime @db.Timestamptz
  
  /// Timestamp of last update.
  updated_at DateTime @db.Timestamptz
  
  /// Timestamp of soft deletion, if present.
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  channel shopping_mall_ai_backend_channels @relation(fields: [shopping_mall_ai_backend_channel_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_channel_sections_shopping_mal_23b251ba")
  parent shopping_mall_ai_backend_channel_sections? @relation("recursive", fields: [parent_id], references: [id], onDelete: Cascade)
  
  recursive shopping_mall_ai_backend_channel_sections[] @relation("recursive")
  shopping_mall_ai_backend_channel_category_mappings shopping_mall_ai_backend_channel_category_mappings[]
  shopping_mall_ai_backend_coupon_restrictions shopping_mall_ai_backend_coupon_restrictions[]
  
  @@index([parent_id])
  
  @@unique([shopping_mall_ai_backend_channel_id, code], map: "shopping_mall_ai_backend_channel_sections_shopping_mal_792bdc54")
  @@index([shopping_mall_ai_backend_channel_id, order], map: "shopping_mall_ai_backend_channel_sections_shopping_mal_5e042da3")
  @@index([name(ops: raw("gin_trgm_ops"))], type: Gin)
}

/// Represents category definitions for a channel (e.g., 'Home Decor',
/// 'Electronics'). Each category is scoped by channel. Supports navigation,
/// filtering, analytics. Allows nesting (tree structure) with parent-child
/// relationships.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_channel_categories {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Channel's {@link shopping_mall_ai_backend_channels.id}. Category is
  /// assigned to a channel.
  shopping_mall_ai_backend_channel_id String @db.Uuid
  
  /// Optional parent category for nested category trees.
  parent_id String? @db.Uuid
  
  /// Category code, unique within channel.
  code String
  
  /// Category display name.
  name String
  
  /// Business/admin context for category.
  description String?
  
  /// Order for display or priority within channel.
  order Int @db.Integer
  
  /// Timestamp of creation.
  created_at DateTime @db.Timestamptz
  
  /// Last updated timestamp.
  updated_at DateTime @db.Timestamptz
  
  /// Soft deletion timestamp, if any.
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  channel shopping_mall_ai_backend_channels @relation(fields: [shopping_mall_ai_backend_channel_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_channel_categories_shopping_m_2ad9d6fb")
  parent shopping_mall_ai_backend_channel_categories? @relation("recursive", fields: [parent_id], references: [id], onDelete: Cascade)
  
  recursive shopping_mall_ai_backend_channel_categories[] @relation("recursive")
  shopping_mall_ai_backend_channel_category_mappings shopping_mall_ai_backend_channel_category_mappings[]
  shopping_mall_ai_backend_coupon_restrictions shopping_mall_ai_backend_coupon_restrictions[]
  
  @@index([parent_id])
  
  @@unique([shopping_mall_ai_backend_channel_id, code], map: "shopping_mall_ai_backend_channel_categories_shopping_m_d26b7459")
  @@index([shopping_mall_ai_backend_channel_id, order], map: "shopping_mall_ai_backend_channel_categories_shopping_m_73c00188")
  @@index([name(ops: raw("gin_trgm_ops"))], type: Gin)
}

/// Subsidiary mapping table for cross-channel or section-to-category
/// assignments—e.g., mapping category trees or sharing categories across
/// sections/channels. Not user-manageable; enables complex navigation or
/// analytics relationships.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_channel_category_mappings {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Section to which the category is mapped {@link
  /// shopping_mall_ai_backend_channel_sections.id}.
  shopping_mall_ai_backend_channel_section_id String @db.Uuid
  
  /// Mapped category's {@link shopping_mall_ai_backend_channel_categories.id}.
  shopping_mall_ai_backend_channel_category_id String @db.Uuid
  
  /// Mapping creation timestamp.
  created_at DateTime @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  section shopping_mall_ai_backend_channel_sections @relation(fields: [shopping_mall_ai_backend_channel_section_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_channel_category_mappings_sho_ac05bd67")
  category shopping_mall_ai_backend_channel_categories @relation(fields: [shopping_mall_ai_backend_channel_category_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_channel_category_mappings_sho_b2c01c3d")
  
  @@index([shopping_mall_ai_backend_channel_category_id], map: "shopping_mall_ai_backend_channel_category_mappings_sho_dab87733")
  
  @@unique([shopping_mall_ai_backend_channel_section_id, shopping_mall_ai_backend_channel_category_id], map: "shopping_mall_ai_backend_channel_category_mappings_sho_2148226c")
}

/// Key-value configuration table for global and system context. Governs
/// business logic, operational flags, feature toggles, and platform-wide
/// parameters. Referenced by all domains—enables dynamic config management
/// and auditability.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_system_configs {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Unique config key. Scope: global, unless per-channel or per-feature. Used
  /// by application logic for config lookup.
  key String
  
  /// Serialized value in standard format (e.g. JSON or string).
  value String
  
  /// Business/admin facing explanation of config parameter.
  description String?
  
  /// Config effectivity start time (for scheduled/conditional configs).
  effective_from DateTime? @db.Timestamptz
  
  /// Optional: config end time.
  effective_to DateTime? @db.Timestamptz
  
  /// Time of creation/insert.
  created_at DateTime @db.Timestamptz
  
  /// Last update timestamp.
  updated_at DateTime @db.Timestamptz
  
  /// Time of soft deletion, if any.
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  @@unique([key])
}

/// Global system audit trail for configuration changes, platform events, and
/// sensitive operations. Used for regulatory compliance, business evidence,
/// and tamper-proof operational history. Each entry is immutable and
/// append-only.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_system_audit_trails {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Type of event (enum: config_change, access, permission, error, etc.).
  event_type String
  
  /// Reference to acting user, seller, admin, etc. (UUID from other tables).
  /// Business context dependent.
  actor_id String @db.Uuid
  
  /// Human-readable business context and event details.
  description String
  
  /// Serialized details/metadata (JSON or text) for technical audit.
  metadata String?
  
  /// Time of event occurrence.
  created_at DateTime @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  @@index([event_type])
  @@index([actor_id])
  @@index([description(ops: raw("gin_trgm_ops"))], type: Gin)
}

/// System-wide files/attachments metadata table. Used across all business
/// domains for referencing uploads, compliance records, and evidence. Tracks
/// file lifecycle, storage, size, and linkage to business entities. Enables
/// content audit, ownership, and secure access controls.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_files {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// User-supplied source filename (immutable, for audit).
  original_filename String
  
  /// File content-type (IANA, e.g. image/png, application/pdf).
  mime_type String
  
  /// URI/reference to blob/object store or file service.
  storage_uri String @db.VarChar(80000)
  
  /// File size in bytes.
  size_bytes Int @db.Integer
  
  /// Uploader's UUID (customer, seller, admin reference).
  uploaded_by_id String @db.Uuid
  
  /// File upload timestamp.
  uploaded_at DateTime @db.Timestamptz
  
  /// Logical deletion timestamp (if any).
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  shopping_mall_ai_backend_article_attachments shopping_mall_ai_backend_article_attachments[]
  
  @@unique([storage_uri])
  @@index([uploaded_by_id])
  @@index([original_filename(ops: raw("gin_trgm_ops"))], type: Gin)
}

/// Represents a codebook (lookup dictionary) containing business
/// labels/codes. Used for status, types, region lists, option tags, etc.
/// Each codebook groups related codes for use in various domain contexts.
/// Managed independently (e.g., status values, option types).
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_codebooks {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Business codebook identifier (unique).
  code String
  
  /// Codebook display name for reference/admin UI.
  name String
  
  /// Business context, usage, and memo for admins.
  description String?
  
  /// Time of creation.
  created_at DateTime @db.Timestamptz
  
  /// Time of last update.
  updated_at DateTime @db.Timestamptz
  
  /// Soft deletion time, if present.
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  shopping_mall_ai_backend_codebook_entries shopping_mall_ai_backend_codebook_entries[]
  
  @@unique([code])
  @@index([name(ops: raw("gin_trgm_ops"))], type: Gin)
}

/// Entries/values within a codebook, e.g. statuses, tags, option values.
/// Each entry is assigned to a parent codebook and has business visibility
/// rules (show/hide) and ordering. Not independently managed.
///
/// @namespace Systematic
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_codebook_entries {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Parent codebook's {@link shopping_mall_ai_backend_codebooks.id}.
  shopping_mall_ai_backend_codebook_id String @db.Uuid
  
  /// Entry code, unique within codebook.
  code String
  
  /// Human display label for this entry.
  label String
  
  /// Business context/detail/memo.
  description String?
  
  /// Sorting order for this entry among entries in a codebook.
  order Int @db.Integer
  
  /// Whether this entry is visible for business use.
  visible Boolean
  
  /// Created timestamp.
  created_at DateTime @db.Timestamptz
  
  /// Updated timestamp.
  updated_at DateTime @db.Timestamptz
  
  /// Soft deletion timestamp, if any.
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  codebook shopping_mall_ai_backend_codebooks @relation(fields: [shopping_mall_ai_backend_codebook_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_codebook_entries_shopping_mal_3a47ac71")
  
  @@unique([shopping_mall_ai_backend_codebook_id, code], map: "shopping_mall_ai_backend_codebook_entries_shopping_mal_0338dcbd")
  @@index([shopping_mall_ai_backend_codebook_id, order], map: "shopping_mall_ai_backend_codebook_entries_shopping_mal_f583a7e5")
  @@index([label(ops: raw("gin_trgm_ops"))], type: Gin)
}