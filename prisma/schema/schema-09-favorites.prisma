/// Core business entity for a user's favorite item bookmark. Stores evidence
/// of favorite creation, snapshotting relevant target details at the time of
/// favoriting for audit and notification. May reference product, address,
/// inquiry via mapping tables. Supports audit/evidence and notification
/// functions. Each favorite belongs to a user and may be grouped via
/// favorite folders.
///
/// @namespace Favorites
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_favorites {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Belonged customer's {@link shopping_mall_ai_backend_customers.id}.
  shopping_mall_ai_backend_customer_id String @db.Uuid
  
  /// Optional reference to a favorite folder grouping {@link
  /// shopping_mall_ai_backend_favorite_folders.id}.
  shopping_mall_ai_backend_favorite_folder_id String? @db.Uuid
  
  /// Snapshot of the target item's title at the time of favoriting (for
  /// evidence/notification).
  title_snapshot String?
  
  /// Type of favorite target: 'product', 'address', 'inquiry', etc. Used for
  /// resolving the mapping table.
  target_type String
  
  /// Snapshot/cached identifier of the target entity (e.g., product code,
  /// address ID). For evidence even if original is removed.
  target_id_snapshot String?
  
  /// Favorite creation timestamp (evidence trail).
  created_at DateTime @db.Timestamptz
  
  /// Record last modification timestamp.
  updated_at DateTime @db.Timestamptz
  
  /// Soft-delete timestamp for logical deletion.
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  customer shopping_mall_ai_backend_customers @relation(fields: [shopping_mall_ai_backend_customer_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorites_shopping_mall_ai_ba_b7884ee0")
  favoriteFolder shopping_mall_ai_backend_favorite_folders? @relation(fields: [shopping_mall_ai_backend_favorite_folder_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorites_shopping_mall_ai_ba_cdbbef15")
  
  shopping_mall_ai_backend_favorite_products shopping_mall_ai_backend_favorite_products[]
  shopping_mall_ai_backend_favorite_addresses shopping_mall_ai_backend_favorite_addresses[]
  shopping_mall_ai_backend_favorite_inquiries shopping_mall_ai_backend_favorite_inquiries[]
  
  @@index([shopping_mall_ai_backend_favorite_folder_id], map: "shopping_mall_ai_backend_favorites_shopping_mall_ai_ba_a59527af")
  
  @@unique([shopping_mall_ai_backend_customer_id, target_type, target_id_snapshot], map: "shopping_mall_ai_backend_favorites_shopping_mall_ai_ba_132d96f2")
  @@index([shopping_mall_ai_backend_customer_id], map: "shopping_mall_ai_backend_favorites_shopping_mall_ai_ba_ea54e513")
  @@index([target_type, target_id_snapshot], map: "shopping_mall_ai_backend_favorites_target_type_target__b2b1be2a")
  @@index([created_at])
  @@index([title_snapshot(ops: raw("gin_trgm_ops"))], type: Gin)
}

/// Mapping/supporting table for users' favorited products. Enables
/// notification to the user about product changes. References both favorite
/// and product IDs; preserves evidence. Used for personalizing product
/// experiences and batch operations.
///
/// @namespace Favorites
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_favorite_products {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Referenced favorite entity’s {@link
  /// shopping_mall_ai_backend_favorites.id}.
  shopping_mall_ai_backend_favorite_id String @db.Uuid
  
  /// Favorited product {@link shopping_mall_ai_backend_products.id}.
  shopping_mall_ai_backend_product_id String @db.Uuid
  
  /// Mapping creation time.
  created_at DateTime @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  favorite shopping_mall_ai_backend_favorites @relation(fields: [shopping_mall_ai_backend_favorite_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorite_products_shopping_ma_28b91166")
  product shopping_mall_ai_backend_products @relation(fields: [shopping_mall_ai_backend_product_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorite_products_shopping_ma_c3279f16")
  
  @@unique([shopping_mall_ai_backend_favorite_id, shopping_mall_ai_backend_product_id], map: "shopping_mall_ai_backend_favorite_products_shopping_ma_2d1c59a9")
  @@index([shopping_mall_ai_backend_product_id], map: "shopping_mall_ai_backend_favorite_products_shopping_ma_f20497e6")
}

/// Mapping/support table for address favorites. Supports personalized
/// checkout experience and fast address selection. Each record connects a
/// favorite entity with a referenced address. Snapshotting provides evidence
/// for future data integrity or notification.
///
/// @namespace Favorites
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_favorite_addresses {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Favorite entity’s {@link shopping_mall_ai_backend_favorites.id}.
  shopping_mall_ai_backend_favorite_id String @db.Uuid
  
  /// Owner of the favorite. References {@link
  /// shopping_mall_ai_backend_customers.id}.
  shopping_mall_ai_backend_customer_id String @db.Uuid
  
  /// Cached address details for audit history and evidence. Used if address is
  /// changed or deleted.
  address_snapshot String?
  
  /// Mapping creation time for audit trail.
  created_at DateTime @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  favorite shopping_mall_ai_backend_favorites @relation(fields: [shopping_mall_ai_backend_favorite_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorite_addresses_shopping_m_a46d1933")
  customer shopping_mall_ai_backend_customers @relation(fields: [shopping_mall_ai_backend_customer_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorite_addresses_shopping_m_1842f562")
  
  @@unique([shopping_mall_ai_backend_favorite_id], map: "shopping_mall_ai_backend_favorite_addresses_shopping_m_fa7c6ab2")
  @@index([shopping_mall_ai_backend_customer_id], map: "shopping_mall_ai_backend_favorite_addresses_shopping_m_963ff97d")
  @@index([address_snapshot(ops: raw("gin_trgm_ops"))], type: Gin, map: "shopping_mall_ai_backend_favorite_addresses_address_sn_a986eca0")
}

/// Mapping/supporting table connecting user favorites to inquiries (Q&A,
/// help lines, support threads, etc.). Supports user notification for new
/// answers and evidence preservation if inquiry content changes. Each record
/// references a favorite and target inquiry.
///
/// @namespace Favorites
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_favorite_inquiries {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Favorite entity’s {@link shopping_mall_ai_backend_favorites.id}.
  shopping_mall_ai_backend_favorite_id String @db.Uuid
  
  /// Favorited inquiry {@link shopping_mall_ai_backend_inquiries.id}.
  shopping_mall_ai_backend_inquiry_id String @db.Uuid
  
  /// Cached/inlined inquiry title/body details for tracking, notification, and
  /// evidence of status/content at favoriting time.
  inquiry_snapshot String?
  
  /// Mapping creation timestamp for evidence/audit.
  created_at DateTime @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  favorite shopping_mall_ai_backend_favorites @relation(fields: [shopping_mall_ai_backend_favorite_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorite_inquiries_shopping_m_ae403822")
  inquiry shopping_mall_ai_backend_inquiries @relation(fields: [shopping_mall_ai_backend_inquiry_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorite_inquiries_shopping_m_2f4c7427")
  
  @@unique([shopping_mall_ai_backend_favorite_id, shopping_mall_ai_backend_inquiry_id], map: "shopping_mall_ai_backend_favorite_inquiries_shopping_m_d706eafe")
  @@index([shopping_mall_ai_backend_inquiry_id], map: "shopping_mall_ai_backend_favorite_inquiries_shopping_m_008e2fe2")
  @@index([inquiry_snapshot(ops: raw("gin_trgm_ops"))], type: Gin, map: "shopping_mall_ai_backend_favorite_inquiries_inquiry_sn_64e8033c")
}

/// User-customizable folders/tags used to organize favorites for management
/// and notification grouping. Each folder belongs to a customer and may be
/// referenced by many favorites. Enables customized notification and
/// grouping logic for better user experience.
///
/// @namespace Favorites
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model shopping_mall_ai_backend_favorite_folders {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id @db.Uuid
  
  /// Folder owner's {@link shopping_mall_ai_backend_customers.id}.
  shopping_mall_ai_backend_customer_id String @db.Uuid
  
  /// Folder name or tag set by user for organization.
  name String
  
  /// Optional folder description (user notes).
  description String?
  
  /// Folder creation time (auditable).
  created_at DateTime @db.Timestamptz
  
  /// Last folder update timestamp.
  updated_at DateTime @db.Timestamptz
  
  /// Soft-delete timestamp for logical deletion (folder hidden, not removed).
  deleted_at DateTime? @db.Timestamptz
  
  //----
  // RELATIONS
  //----
  customer shopping_mall_ai_backend_customers @relation(fields: [shopping_mall_ai_backend_customer_id], references: [id], onDelete: Cascade, map: "shopping_mall_ai_backend_favorite_folders_shopping_mal_c238c27e")
  
  shopping_mall_ai_backend_favorites shopping_mall_ai_backend_favorites[]
  
  @@unique([shopping_mall_ai_backend_customer_id, name], map: "shopping_mall_ai_backend_favorite_folders_shopping_mal_8157ae76")
  @@index([shopping_mall_ai_backend_customer_id], map: "shopping_mall_ai_backend_favorite_folders_shopping_mal_4ef94dcb")
  @@index([name(ops: raw("gin_trgm_ops"))], type: Gin)
}